<?xml version="1.0" encoding="UTF-8"?>
<Configuration>
	<springProperty scope="context" name="ACTIVE_PROFILE" source="spring.profiles.active"/>
	<timestamp key="logTimestamp" datePattern="yyyy-MM-dd"/>
	<property name="prdConfigFile" value="/var/www/vhosts/ziumlight.com/config/application-admin-prd.properties" />
	<define name="INCLUDED_FILE_EXISTS" class="ch.qos.logback.core.property.FileExistsPropertyDefiner">
    	<path>${prdConfigFile}</path>
   	</define>
  
	<if condition='property("INCLUDED_FILE_EXISTS").equals("true")'>
	    <then>
	    	<property file="${prdConfigFile}" />
	    </then>
	    <else>
	    	<property resource="admin-dev-config.properties" />
	    </else>
  	</if>
	
	<appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
		<layout class="ch.qos.logback.classic.PatternLayout">
			<Pattern>
				%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36}.%M:%L - %msg%n
			</Pattern>
		</layout>
	</appender>
	
	<appender name="FILE-DEBUG" class="ch.qos.logback.core.rolling.RollingFileAppender">
		<file>${log.path}/debug-${logTimestamp}.log</file>
		<encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
			<Pattern>
				%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36}.%M:%L - %msg%n
			</Pattern>
		</encoder>

		<rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
			<!-- rollover daily -->
			<fileNamePattern>${log.path}/debug-%d{yyyy-MM-dd}_log.log</fileNamePattern>
		</rollingPolicy>
	</appender>
	
	<appender name="FILE-ACCESS" class="ch.qos.logback.core.rolling.RollingFileAppender">
		<file>${log.path}/access-${logTimestamp}.log</file>
		<encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
			<Pattern>
				%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36}.%M:%L - %msg%n
			</Pattern>
		</encoder>

		<rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
			<!-- rollover daily -->
			<fileNamePattern>${log.path}/access-%d{yyyy-MM-dd}_log.log</fileNamePattern>
		</rollingPolicy>
	</appender>
	
	<appender name="FILE-ERROR" class="ch.qos.logback.core.rolling.RollingFileAppender">
		<file>${log.path}/error-${logTimestamp}.log</file>
		<filter class="ch.qos.logback.classic.filter.LevelFilter">
            <level>ERROR</level>
            <onMatch>ACCEPT</onMatch>
            <onMismatch>DENY</onMismatch>
        </filter>
		<encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
			<Pattern>
				%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36}.%M:%L - %msg%n
			</Pattern>
		</encoder>

		<rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
			<!-- rollover daily -->
			<fileNamePattern>${log.path}/error-%d{yyyy-MM-dd}_log.log</fileNamePattern>
		</rollingPolicy>
	</appender>
	
	<logger name="com.admin.config.security" level="debug"
		additivity="false">
		<appender-ref ref="STDOUT" />
		<appender-ref ref="FILE-ACCESS" />
	</logger>
	
	<logger name="com.admin" level="debug"
		additivity="false">
		<appender-ref ref="STDOUT" />
		<appender-ref ref="FILE-DEBUG" />
	</logger>
	
	<logger name="org.springframework.web" level="error"
		additivity="false">
		<appender-ref ref="STDOUT" />
		<appender-ref ref="FILE-DEBUG" />
	</logger>
	
	<logger name="org.hibernate.SQL" level="debug"
		additivity="false">
		<appender-ref ref="STDOUT" />
		<appender-ref ref="FILE-DEBUG" />
	</logger>
	
	<logger name="org.hibernate.SQL" level="debug"
		additivity="false">
		<appender-ref ref="STDOUT" />
		<appender-ref ref="FILE-DEBUG" />
	</logger>
	
	<logger name="org.hibernate.type.descriptor.sql.BasicBinder" level="debug"
		additivity="false">
		<!-- <appender-ref ref="STDOUT" /> -->
		<appender-ref ref="FILE-DEBUG" />
	</logger>

	<root level="INFO">
		<appender-ref ref="STDOUT" />
		<appender-ref ref="FILE-DEBUG" />
		<appender-ref ref="FILE-ERROR" />
	</root>
</Configuration>